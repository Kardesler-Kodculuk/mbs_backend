(this.webpackJsonpmbsfrontend=this.webpackJsonpmbsfrontend||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),s=n.n(c),i=n(24),o=n(15),u=Object(r.createContext)(null),l=n(7),j=n.n(l),d=n(11),p=n(14),b=n(18),h=n.n(b);var f=n(47),O=n(34);function x(e){var t=e.initials,n=Object(r.useState)(t||{}),a=Object(p.a)(n,2),c=a[0],s=a[1];return{handleChange:function(e,t){var n=t.target.value,r=e;s(Object(O.a)(Object(O.a)({},c),{},Object(f.a)({},r,n)))},values:c}}var m=n(166),v=n(168),w=n(170),g=n(138),k=n(187),y=n(172),S=n(63),C=n.n(S),_=n(2),N=Object(m.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{margin:e.spacing(1),width:"25ch"},title:{fontSize:25,marginBottom:75},Icon:{width:60,height:60}}}));function L(e){e.setToken;var t=Object(r.useContext)(u),n=t.user,a=t.isLoading,c=N(),s=x({initialValues:{username:"",password:""}}),i=s.values,l=s.handleChange,b=function(){var e="https://mbsbackend.herokuapp.com/",t=Object(o.g)(),n=Object(r.useContext)(u).setUser,a=Object(r.useState)(null),c=Object(p.a)(a,2),s=c[0],i=c[1],l=function(){var r=Object(d.a)(j.a.mark((function r(){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.get(e+"users",{withCredentials:!0}).then((function(e){n(e.data),t.push("/"+e.data.id+"/"+e.data.role+"/home")})).catch((function(e){i(!0)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return{loginUser:function(){var t=Object(d.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.username,a=n.password,t.abrupt("return",h.a.post(e+"jwt",{username:r,password:a},{withCredentials:!0}).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i(!0)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),error:s}}(),f=b.error,O=b.loginUser;if(a)return Object(_.jsx)("div",{});if(n)return Object(_.jsx)(o.a,{to:"/".concat(n.id,"/").concat(n.role,"/home")});var m=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)(v.a,{children:Object(_.jsx)("form",{onSubmit:m,children:Object(_.jsxs)(w.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"70vh"},children:[Object(_.jsx)(g.a,{className:c.title,children:"MBS"}),Object(_.jsx)(C.a,{className:c.Icon}),Object(_.jsx)(k.a,{className:c.textField,required:!0,label:"email",onChange:function(e){return l("username",e)},color:"primary",error:f}),Object(_.jsx)(k.a,{className:c.textField,required:!0,label:"password",type:"password",onChange:function(e){return l("password",e)},color:"primary",error:f}),Object(_.jsx)(y.a,{variant:"contained",color:"primary",type:"submit",children:"login"})]})})})}var I=n(173),U=n(174),P=n(175),z=Object(m.a)({root:{minWidth:275},title:{fontSize:24,marginBottom:12},body:{fontSize:18}});function T(){var e=Object(r.useContext)(u).user,t=z();return Object(_.jsx)(I.a,{className:t.root,children:Object(_.jsxs)(U.a,{children:[Object(_.jsx)(g.a,{variant:"h3",className:t.title,color:"primary",children:"Welcome, ".concat(e.username)}),Object(_.jsx)(P.a,{}),Object(_.jsxs)(g.a,{className:t.cody,children:[" ","To start select an action from the navigation panel in the left hand side of the screen.",Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),"Currently, you have ",e.role," privileges."]})]})})}var B=n(177),E=n(178),H=n(176),M=n(179),W=n(194),F=n(188),G=n(191),q=n(171),A=Object(m.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},item:{fontSize:19,flexGrow:1,flexShrink:1},content:{flexGrow:1,padding:e.spacing(3)}}}));function D(e){var t=A(),n=e.selections,r=e.to,a=e.links,c=n.map((function(e,n){return Object(_.jsxs)("div",{children:[Object(_.jsx)(W.a,{className:t.item,children:Object(_.jsx)(F.a,{component:"div",display:"inline",children:Object(_.jsx)(i.b,{className:"nav-link ".concat(0===n?"active":""),to:r+a[n],children:e})})}),Object(_.jsx)(P.a,{})]},"sidebar_selection_"+n)}));return Object(_.jsx)("div",{className:t.root,children:Object(_.jsxs)(G.a,{className:t.drawer,classes:{paper:t.drawerPaper},variant:"persistent",anchor:"left",open:!0,children:[Object(_.jsx)(H.a,{}),Object(_.jsxs)("div",{className:t.drawerContainer,children:[Object(_.jsx)(P.a,{}),Object(_.jsx)(q.a,{dense:!0,className:t.list,children:c})]})]})})}function J(e){var t=e.contents,n=e.to,r=e.links,a=e.key_,c=t.map((function(e,t){return Object(_.jsx)(o.b,{path:n+r[t],children:Object(_.jsx)("div",{children:e})},"".concat(a,"_").concat(t))}));return Object(_.jsx)("div",{children:Object(_.jsx)(o.d,{children:c})})}var V=n(88),R=n.n(V),K=Object(m.a)((function(e){return{root:{display:"flex"},appBar:{flexGrow:1,zIndex:e.zIndex.drawer+1},title:{flexGrow:1},content:{flexGrow:1,padding:e.spacing(3),margin:e.spacing(3)},logout:{marginRight:e.spacing(2)}}}));function Q(e){var t=Object(r.useContext)(u).user,n=function(){var e=Object(o.g)(),t=Object(r.useState)(null),n=Object(p.a)(t,2),a=n[0],c=n[1];return{logoutUser:function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h.a.delete("https://mbsbackend.herokuapp.com/jwt",{withCredentials:!0}).then(function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.go(0);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){c(e)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),error:a}}().logoutUser,a=Object(o.h)(),c=a.path,s=a.url,i=K(),l=e.selections,b=e.links,f=e.contents;return Object(_.jsx)(v.a,{children:Object(_.jsxs)("div",{className:i.root,children:[Object(_.jsx)(B.a,{}),Object(_.jsx)(E.a,{position:"fixed",className:i.appBar,children:Object(_.jsxs)(H.a,{children:[Object(_.jsx)(M.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"open drawer",children:Object(_.jsx)(C.a,{})}),Object(_.jsx)(g.a,{variant:"h6",className:i.title,children:"MBS"}),Object(_.jsx)("div",{className:i.logout,children:Object(_.jsx)(M.a,{color:"inherit",onClick:n,children:Object(_.jsx)(R.a,{})})})]})}),null===t?Object(_.jsx)("div",{}):Object(_.jsx)(D,{username:t.username,selections:l,to:s,links:b,key_:"student_sidebar",logoutHandler:n}),Object(_.jsx)("main",{className:i.content,children:Object(_.jsx)(w.a,{container:!0,justify:"center",alignItems:"center",style:{minHeight:"60vh"},children:Object(_.jsx)(J,{contents:f,to:c,links:b,key_:"student_content"})})})]})})}var X=n(66),Y=n.n(X),Z=n(90),$=n.n(Z),ee=n(89),te=n.n(ee);function ne(){var e="https://mbsbackend.herokuapp.com/",t=Object(r.useContext)(u).user,n=Object(r.useState)([]),a=Object(p.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(null),o=Object(p.a)(i,2),l=o[0],b=o[1],f=Object(r.useState)(!0),O=Object(p.a)(f,2),x=O[0],m=O[1];return Object(r.useEffect)((function(){if(x){var n="advisor"===t.role?"proposals":"recommendations";(function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get(e+n,{withCredentials:!0}).then((function(e){s(e.data),m(!1)})).catch((function(e){b(e),m(!1)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}),[t.role,x]),{proposals:c,setProposals:s,studentProposal:function(){var t=Object(d.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.advisor_id,t.abrupt("return",h.a.post(e+"proposals",{advisor_id:r},{withCredentials:!0}).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b(!0)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),isLoading:x,setLoading:m,error:l}}function re(){var e=Object(r.useContext)(u).user,t=Object(r.useState)([]),n=Object(p.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(p.a)(s,2),o=i[0],l=i[1],b=Object(r.useState)(!0),f=Object(p.a)(b,2),O=f[0],x=f[1],m=Object(r.useState)(null),v=Object(p.a)(m,2),w=v[0],g=v[1];return Object(r.useEffect)((function(){(function(){var t=Object(d.a)(j.a.mark((function t(){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r="advisor"===e.role?"students/":"advisors/",t.next=4,Promise.all(o.map(function(){var e=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.a.get("https://mbsbackend.herokuapp.com/"+r+t,{withCredentials:!0}).then((function(e){n.push(e.data)})).catch((function(e){g(e)})),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:c(n),x(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[o,e.role]),{users:a,setUsers:c,UserIds:o,setUserIds:l,isLoading:O,error:w}}var ae=n(180),ce=n(181),se=n(182),ie=Object(m.a)((function(e){return{root:{marginTop:45},table:{margin:e.spacing(.5),minWidth:650},title:{margin:e.spacing(1),fontSize:18},body:{fontSize:14}}}));function oe(e){var t=ie(),n=e.children,r=e.checkboxes,a=e.title;return Object(_.jsx)(I.a,{className:t.root,children:Object(_.jsxs)(U.a,{children:[Object(_.jsx)(g.a,{variant:"h3",className:t.title,color:"primary",children:a}),Object(_.jsx)(P.a,{}),r,Object(_.jsx)(v.a,{children:Object(_.jsx)(w.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"1vh",minWidth:"35vh"},children:Object(_.jsx)(ae.a,{className:t.table,children:Object(_.jsx)(ce.a,{children:Object(_.jsx)(se.a,{children:n})})})})})]})})}var ue=n(185),le=n(186);var je=n(183),de=n(184),pe=n(190),be="https://mbsbackend.herokuapp.com/",he=Object(m.a)((function(e){return{button:{color:"green"}}}));function fe(){var e=he(),t=Object(r.useState)(null),n=Object(p.a)(t,2),a=(n[0],n[1]),c=ne(),s=c.proposals,i=c.isLoading,o=c.setLoading,u=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(p.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!0),l=Object(p.a)(u,2),b=l[0],f=l[1];return Object(r.useEffect)((function(){b&&function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://mbsbackend.herokuapp.com/students",{withCredentials:!0}).then((function(e){a(e.data),f(!1)})).catch((function(e){o(e),f(!1)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[b]),{students:n,setStudents:a,isLoading:b,setLoading:f,error:i}}(),l=u.students,b=u.isLoading,x=u.setLoading,m=re(),v=m.users,w=m.isLoading,g=m.setUserIds,k=re(),y=k.users,S=k.isLoading,C=k.setUserIds;function N(){o(!0),x(!0)}var L=Object(r.useState)({showStudents:!0,showProposals:!1}),I=Object(p.a)(L,2),U=I[0],P=I[1],z=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.proposal_id,e.abrupt("return",h.a.put(be+"proposals/"+n,{},{withCredentials:!0}).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a(e),console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.proposal_id,e.abrupt("return",h.a.delete(be+"proposals/"+n,{withCredentials:!0}).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a(e),console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i&&!b){e.next=2;break}return e.abrupt("return",Object(_.jsx)("div",{}));case 2:if(g(s.map((function(e){return e.student_id}))),C(l.map((function(e){return e}))),!S&&!w){e.next=6;break}return e.abrupt("return",Object(_.jsx)("div",{}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,b,S,w]),Object(_.jsxs)(oe,{title:"Previously Uploaded Students",checkboxes:Object(_.jsx)(je.a,{row:!0,children:[{s:U.showStudents,name:"Show Managed Students",id:"showStudents"},{s:U.showProposals,name:"Show Proposals",id:"showProposals"}].map((function(e){return Object(_.jsx)(de.a,{control:Object(_.jsx)(pe.a,{checked:e.s,onChange:function(e){return function(e){P(Object(O.a)(Object(O.a)({},U),{},Object(f.a)({},e.target.name,e.target.checked)))}(e)},name:e.id}),label:e.name},"checkbox_manage_student"+e.id)}))}),children:[U.showStudents?y.map((function(t,n){return Object(_.jsxs)(ue.a,{children:[Object(_.jsx)(le.a,{component:"th",scope:"row",children:t.name_+" "+t.surname}),Object(_.jsx)(le.a,{align:"right",children:Object(_.jsx)(M.a,{variant:"contained",className:e.button,onClick:function(e){},children:Object(_.jsx)(te.a,{})})})]},"managed_table_row_"+t.name_+" "+t.surname+n)})):null,U.showProposals?v.map((function(e,t){return Object(_.jsxs)(ue.a,{children:[Object(_.jsx)(le.a,{component:"th",scope:"row",children:e.name_+" "+e.surname}),Object(_.jsxs)(le.a,{align:"right",children:[e.thesis_topic,Object(_.jsx)(M.a,{variant:"contained",onClick:function(e){z(s[t])},children:Object(_.jsx)(Y.a,{color:"primary"})}),Object(_.jsx)(M.a,{variant:"contained",onClick:function(e){T(s[t])},children:Object(_.jsx)($.a,{color:"secondary"})})]})]},"proposed_table_row_"+e.name_+" "+e.surname+t)})):null]})}function Oe(){var e=[Object(_.jsx)(T,{}),Object(_.jsx)(fe,{})];return Object(_.jsx)(Q,{selections:["Home","Manage Student"],links:["/home","/manage-student"],contents:e})}var xe=Object(m.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{margin:e.spacing(1),width:"40ch"},title:{fontSize:25},body:{fontSize:18}}}));function me(){var e=Object(r.useState)(null),t=Object(p.a)(e,2),n=(t[0],t[1]),a=xe(),c=Object(r.useContext)(u).user,s=x({initialValues:{thesis_topic:""}}),i=s.values,o=s.handleChange,l=function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://mbsbackend.herokuapp.com/",r=t.thesis_topic,e.abrupt("return",h.a.patch("https://mbsbackend.herokuapp.com/students/"+c.student.user_id,{thesis_topic:r},{withCredentials:!0}).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n(!0)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,l(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)(I.a,{className:a.root,children:Object(_.jsxs)(U.a,{children:[Object(_.jsx)(g.a,{variant:"h3",className:a.title,color:"primary",children:"Submit Thesis Topic"}),Object(_.jsx)(P.a,{}),Object(_.jsx)(v.a,{children:Object(_.jsx)("form",{onSubmit:b,children:Object(_.jsxs)(w.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"20vh",minWidth:"35vh"},children:[Object(_.jsx)(k.a,{className:a.textField,required:!0,label:"Thesis Topic",color:"primary",onChange:function(e){return o("thesis_topic",e)}}),Object(_.jsx)(y.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})]})})})]})})}function ve(){var e=ne(),t=e.proposals,n=e.studentProposal,a=e.isLoading,c=e.reset,s=re(),i=s.users,o=s.isLoading,u=s.setUserIds;return Object(r.useEffect)((function(){return a?Object(_.jsx)("div",{}):(u(t.map((function(e){return e.advisor_id}))),o?Object(_.jsx)("div",{}):void 0)}),[a,o]),Object(_.jsx)(oe,{title:"Previously Uploaded Advisors",children:i.map((function(e){return Object(_.jsxs)(ue.a,{children:[Object(_.jsx)(le.a,{children:Object(_.jsx)(M.a,{variant:"contained",onClick:function(t){n(e),c()},children:Object(_.jsx)(Y.a,{color:"primary"})})}),Object(_.jsx)(le.a,{component:"th",scope:"row",align:"right",children:e.name_+" "+e.surname})]},"table_row_"+e.name_)}))})}function we(){var e=[Object(_.jsx)(T,{}),Object(_.jsx)(me,{}),"Manage Thesis",Object(_.jsx)(ve,{})];return Object(_.jsx)(Q,{selections:["Home","Select Topic","Manage Thesis","Select Advisor"],links:["/home","/thesis-topic","/manage-thesis","/select-advisor"],contents:e})}var ge=n(91);function ke(e){var t=Object(r.useContext)(u),n=t.user,a=(t.isLoading,e.component),c=Object(ge.a)(e,["component"]);return n?Object(_.jsx)(o.b,Object(O.a)(Object(O.a)({},c),{},{render:function(e){return Object(_.jsx)(a,Object(O.a)({},e))}})):Object(_.jsx)(o.a,{to:"/login"})}function ye(){var e=Object(r.useContext)(u),t=e.user;return e.isLoading?Object(_.jsx)("div",{}):t?Object(_.jsx)(o.a,{to:"/".concat(t.id,"/").concat(t.role)}):Object(_.jsx)(o.a,{to:"/login"})}function Se(){var e=function(){var e=Object(r.useState)(null),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),s=Object(p.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){i&&function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://mbsbackend.herokuapp.com/users",{withCredentials:!0}).then((function(e){a(e.data),o(!1)})).catch((function(e){o(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i]),{user:n,setUser:a,isLoading:i}}(),t=e.user,n=e.setUser,a=e.isLoading;return Object(_.jsx)("div",{className:"wrapper",children:Object(_.jsx)(u.Provider,{value:{user:t,setUser:n,isLoading:a},children:Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{exact:!0,path:"/",component:ye}),Object(_.jsx)(o.b,{path:"/login",component:L}),Object(_.jsx)(ke,{path:"/:uuid/student",component:we}),Object(_.jsx)(ke,{path:"/:uuid/advisor",component:Oe})]})})})}n(133),n(134);s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(i.a,{children:Object(_.jsx)(Se,{})})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.97b6bb15.chunk.js.map